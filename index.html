<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>AWS Presentation</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<link rel="icon" href="/dist/assets/favicon.ico">

	</head>
	<style>
		.left {
			text-align: left;
		}
	</style>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<h2>Match & Link Processor</h2>
					<br>
					<br>
					<p>
						<small>Prepared by <strong>Kareem Aljabr</strong></small>
					</p>
				</section>

				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<h2>Introduction</h2>
					<p>
						At <a href="https://www.universalorlando.com/" target="_blank">Universal Orlando Resort</a> guests can have either a profile or an account.
					</p>
					<p style="text-align: left">Profile:</p>
					<ul style="">
						<li>Buy a ticket and <span style="color: yellow">checkout</span> as a guest</li>
						<li>Book a hotel room and <span style="color: yellow">checkout</span> as a guest</li>
						<li>Buy a ticket at the <span style="color: yellow">Theme Park</span> gate</li>
						<li>Taking a <span style="color: yellow">survey</span> in the park</li>
						<li><span style="color: yellow">Sign up</span> for emails</li>
					</ul>
				</section>

				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<h2>Introduction Count.</h2>
					<br>

					<p style="text-align: left">Account:</p>
					<ul style="">
						<li>Sign up using the <span style="color: yellow">website</span> or <span style="color: yellow">mobile</span></li>
						<li><span style="color: yellow">Checkout</span> as a guest and at the end provide a password to create an account</li>
						<li><span style="color: yellow">Ticket confirmation email</span> and click on the link to create an account</li>
					</ul>
				</section>

				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<h3>What is Match & Link?</h3>
					<br>
					<ul>
						<li class="fragment">
							<span style="color: yellow">Asynchronous</span> process
						</li>
						<li class="fragment">
							<span style="color: yellow">Consumes Kafka</span> events <span class="fragment"><span style="color: yellow">produced</span> by guest profile service.</span>
						</li>
						<li class="fragment">
							When a profile is <span style="color: yellow">created or updated</span> it searches for a matching profile.
						</li>
						<li class="fragment">
							If a <span style="color: yellow">matching</span> profile is found, both profiles will be <span style="color: yellow">linked</span>.
						</li>
					</ul>
				</section>

				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<section>
						<h3>Core Concept - Scenario 1</h3>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>

						<div data-animate data-src="dist/assets/match-link-scenarios/orphan_match_link.svg" style="height: 70%;width: 70%;margin: auto;">
							<!--
                            { "setup": [
                            { "element": "#step_1", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "0"} ] },
                            { "element": "#step_2", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "1"} ] },
                            { "element": "#step_3", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "2"} ] },
                            { "element": "#step_4", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "3"} ] }
                            ]}
                            -->
						</div>
					</section>
					<section>
						<h3>Core Concept - Scenario 2</h3>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>

						<div data-animate data-src="dist/assets/match-link-scenarios/orphan_match_link_parent.svg" style="height: 70%;width: 70%;margin: auto;">
							<!--
                            { "setup": [
                            { "element": "#step_1", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "0"} ] },
                            { "element": "#step_2", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "1"} ] },
                            { "element": "#step_3", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "2"} ] },
                            { "element": "#step_4", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "3"} ] },
                            { "element": "#step_5", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "4"} ] }
                            ]}
                            -->
						</div>
					</section>
					<section>
						<h3>Core Concept - Scenario 3</h3>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>
						<span class="fragment"></span>

						<div data-animate data-src="dist/assets/match-link-scenarios/orphan_match_link_child.svg" style="height: 70%;width: 70%;margin: auto;">
							<!--
                            { "setup": [
                            { "element": "#step_1", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "0"} ] },
                            { "element": "#step_2", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "1"} ] },
                            { "element": "#step_3", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "2"} ] },
                            { "element": "#step_4", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "3"} ] },
                            { "element": "#step_5", "modifier": "attr", "parameters": [ {"class": "fragment", "data-fragment-index": "4"} ] }
                            ]}
                            -->
						</div>
					</section>

				</section>
				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<section>
						<h3>History ‚è≥</h3>
						<br>
						<p>
							Existing Node.js microservice, <span style="color: yellow">ms-guest</span>, used to proxy SOAP requests to an <span style="color: yellow">IBM MDM AE</span>.
						</p>
						<br>
						<p>
							<small>
								<a href="https://www.ibm.com/downloads/cas/PAA9NDJ9" target="_blank">IBM InfoSphere MDM AE</a> : IBM InfoSphere Master Data Management Advanced Edition
							</small>
						</p>
						<aside class="notes">
								MDM AE: Delivers data matching, data exploration and visualization for business users
						</aside>
					</section>
					<section>
						<h3>Issues Part #1</h3>
						<br>
						<ul>
							<li class="fragment">
								written by a team of developers from IBM, their contracts were <span style="color: red">terminated</span>.
							</li>
							<li class="fragment">
								Lack of <span style="color: yellow">documentation</span>.
							</li>
							<li class="fragment">
								Difficult to maintain due to low <span style="color: yellow">unit test</span> coverage. And lack of <span style="color: yellow">integration tests</span>.
							</li>
							<li class="fragment">
								<span style="color: yellow">Loose</span> API contracts
							</li>
							<li class="fragment">
								<span style="color: yellow">Multiple</span> endpoints with the <span style="color: yellow">same functionality</span>.
							</li>
							<li class="fragment">
								<span style="color: yellow">DB</span> models CRUD operations endpoints <span style="color: yellow">exposed</span>.
							</li>
						</ul>
						<aside class="notes">
							<p>
								Replaced by a bunch of contractors and employees. due to restructuring and cutting cost reasons.
							</p>
							<p>
								json payload is not consistent, mobile, web, park and other services call it with different payload format.
							</p>
						</aside>
					</section>

					<section>
						<h3>Issues Part #2</h3>
						<br>
						<ul>
							<li class="fragment">
								Many <span style="color: yellow">performance</span> issues in <span style="color: yellow">production</span>.
							</li>
							<li class="fragment">
								Synchronous <span style="color: yellow">Match & Merge</span>
							</li>
							<li class="fragment">
								Poor design. An <span style="color: yellow">unregistered guest profile</span> is created whenever you land on the website.
							</li>
							<li class="fragment">
								Resulted in creating 100 millions of <span style="color: yellow">ghost profiles</span>.
							</li>
							<li class="fragment">
								<span style="color: yellow;">IBM</span> support contract is too <span style="color: yellow">expensive</span>.
							</li>
						</ul>
						<aside class="notes">
							<p>
								Match & Merge is part of the MDM AE service that used to happen real time when the profile is created or updated.
							</p>
						</aside>
					</section>
				</section>

				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<section>
						<h3>Existing Solution Revamp</h3>
						<br>
						<p>Component Diagram Stages</p>
						<br>
						<ul>
							<li>
								<span style="color: yellow">Existing</span> Architecture
							</li>
							<li>
								<span style="color: yellow">Suggested</span> Architecture
							</li>
							<li>
								<span style="color: yellow">Proxy</span> existing service to new service
							</li>
							<li>
								Introducing <span style="color: yellow">Kafka</span>
							</li>
						</ul>
					</section>
					<section>
						<h4>Existing Architecture</h4>
						<div style="margin: auto;">
							<img src="dist/assets/diagrams/mdm-ae.svg" alt="mdm ae old" style="height: 500px"/>
						</div>
						<aside class="notes">
							<p>
								As I mentioned earlier we had many issues with this design
							</p>
							<p>
								The synchronous M&M. Adding new features to MDM AE was challenging. Production issues due to performance especially on event days.
							</p>
						</aside>
					</section>
					<section>
						<h4>Suggested Architecture</h4>
						<div style="margin: auto;">
							<img src="dist/assets/diagrams/mdm-ae-retire.svg" alt="mdm ae old" style="height: 500px"/>
						</div>
						<aside class="notes">
							<p>
								We faced many challenges trying to implement this design right away as our clients had no bandwidth to work on rewriting their services to point to our new service. With completely new endpoints and different requests and responses.
							</p>
						</aside>
					</section>
					<section>
						<h4>Proxy to New Service</h4>
						<div style="margin: auto;">
							<img src="dist/assets/diagrams/mdm-ae-proxy.svg" alt="mdm ae old" style="height: 500px"/>
						</div>
						<aside class="notes">
							<p>
								I suggested the following solution. Rewire old service to point to the new service. This way our clients don't need to make changes until they are ready.
							</p>
							<p>
								During this process I found out many gaps in the new service design. Like missing functionalities or not required ones.
							</p>
							<p>
								Wrote automation testing for the old service and made that part of the CI/CD pipeline to make sure whatever changes we make are not going to break current functionality.
							</p>
						</aside>
					</section>
					<section>
						<h4>Component Diagram - Kafka</h4>
						<div style="margin: auto;">
							<img src="dist/assets/diagrams/mdm-ae-kafka.svg" alt="mdm ae old" style="height: 500px"/>
						</div>
					</section>
				</section>
				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<section>
						<h3>Sequence Diagram - Initial</h3>
						<div style="margin: auto;">
							<img src="dist/assets/sequence/match-link-initial.svg" alt="mdm ae old" style="height: 550px"/>
						</div>
					</section>
				</section>
				<section data-background-image="dist/assets/background/black_chalk.jpg">
					<section>
						<h3>Guests Dashboard</h3>
						<br>
						<p>
							I created a <span style="color: yellow">UI Dashboard</span> to allow both <span style="color: yellow">QA</span> and <span style="color: yellow">Business</span> teams to test the Match & Link process.
						</p>
						<aside class="notes">
							<p>
								We had issues related to writing automation tests to validate Match & Link results. Since it's Asynchronous process.
							</p>
							<p>
								At that time was listening to podcasts and one guest was talking about Vue JS. I decided to learn it. I found creating this dashboard
								a motivation for me to learn it.
							</p>
							<p>
								Deployed on Github. Pages to save money and push code faster.
							</p>
						</aside>
					</section>
					<section>
						<h3>Create Guest Profile</h3>
						<p>
							<img src="dist/assets/guests-dashboard/create_guest_profile.png" alt="create guest profile" style="max-width: 100%;height: auto;">
						</p>
						<aside class="notes">
							Create a guest profile to validate matching a linking results.
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link</h3>
						<p>
							<img src="dist/assets/guests-dashboard/find_orphan_profile.png" alt="find orphan profile">
						</p>
						<aside class="notes">
							Click on find tab to retrieve the profile you created, and validate the match & link outcome.
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link Continued</h3>
						<p>
							<img src="dist/assets/guests-dashboard/find_parent_one_linked.png" alt="find one linked profile">
						</p>
						<aside class="notes">
							It might take a few seconds to see the matching result since it's an asynchronous process.
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link Continued</h3>
						<p>
							<img src="dist/assets/guests-dashboard/find_parent_profile_two_linked.png" alt="find two linked profiles">
						</p>
						<aside class="notes">
							If you go ahead and create a 3rd profile matching the parent you'd see that in the search result here.
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link Continued</h3>
						<p>
							<img src="dist/assets/guests-dashboard/expand_parent_profile.png" alt="expand parent profile">
						</p>
						<aside class="notes">
							<p>
								You can expand any profile listed here to see more details.
							</p>
							<p>
								We use Experian to standardize addresses to help with matching
							</p>
							<p>
								Standardizing the address happens in the background and data is saved on the marketing document and it's not shared with
								the guest. There is a score for standardized address when we call experian and we take the highest score if it's 90+%
							</p>
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link Continued</h3>
						<p>
							<img src="dist/assets/guests-dashboard/expand_first_child.png" alt="expand child 1 profile">
						</p>
						<aside class="notes">
							Here this profile matched the parent profile thru EMAIL_COMBO_1 matching rule.
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link Continued</h3>
						<p>
							<img src="dist/assets/guests-dashboard/expand_second_child.png" alt="expand child 2 profile">
						</p>
						<aside class="notes">
							Here this profile matched the parent profile thru PHONE_COMBO_1 matching rule.
						</aside>
					</section>
					<section>
						<h3>Validate Match & Link Continued</h3>
						<p>
							<img src="dist/assets/guests-dashboard/edit_parent_profile.png" alt="edit parent profile">
						</p>
						<aside class="notes">
							You can also edit a profile to validate the update scenario
						</aside>
					</section>

				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="plugin/animate/plugin.js"></script>
		<script src="plugin/animate/svg.min.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				// Add your config here:
				// transition: 'convex',
				transitionSpeed: 'slow',        // slow down slide transitions
				controlsTutorial: false,        // turn off arrow bumping
				// controlsLayout: 'edges',        // default 'bottom-right'
				 //controlsBackArrows: 'visible',  // make previous slide arrow bright instead of faded
				progress: false,                // turn off progress bar display
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealAnimate, RevealZoom ]
			});
		</script>
	</body>
</html>
