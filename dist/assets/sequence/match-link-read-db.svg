<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1055px" preserveAspectRatio="none" style="width:1507px;height:1055px;background:#FFFFFF;" version="1.1" viewBox="0 0 1507 1055" width="1507px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="215" x="642" y="22.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="205" x="647" y="41.3125">Match &amp; Link execution flow</text><rect fill="#FFE4C4" height="986.709" style="stroke:#000000;stroke-width:0.5;" width="155" x="105" y="56.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92" x="136.5" y="68.834">Microservices</text><rect fill="#FFC0CB" height="986.709" style="stroke:#000000;stroke-width:0.5;" width="141" x="302" y="56.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90" x="327.5" y="68.834">Kafka Cluster</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="331.5" y="84.1445">ZooKeeper</text><rect fill="#90EE90" height="986.709" style="stroke:#000000;stroke-width:0.5;" width="282" x="485" y="56.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66" x="593" y="68.834">NoSQL DB</text><rect fill="#ADD8E6" height="986.709" style="stroke:#000000;stroke-width:0.5;" width="169" x="809" y="56.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="857.5" y="68.834">Processors</text><rect fill="#E6E6FA" height="986.709" style="stroke:#000000;stroke-width:0.5;" width="144" x="1020" y="56.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="1064" y="68.834">External</text><rect fill="#D3D3D3" height="986.709" style="stroke:#000000;stroke-width:0.5;" width="148" x="1206" y="56.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="1246.5" y="68.834">Data Lake</text><rect fill="#FFFFFF" height="178.4844" style="stroke:#000000;stroke-width:1.0;" width="10" x="177.5" y="185.4844"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="177.5" y="542.4531"/><rect fill="#FFFFFF" height="178.4844" style="stroke:#000000;stroke-width:1.0;" width="10" x="177.5" y="763.248"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="550" y="274.7266"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="692" y="631.6953"/><rect fill="#FFFFFF" height="533.1426" style="stroke:#000000;stroke-width:1.0;" width="10" x="888.5" y="408.5898"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="1087" y="453.2109"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="1432.5" y="852.4902"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="18" x2="18" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="182" x2="182" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="372" x2="372" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="555" x2="555" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="697" x2="697" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="893" x2="893" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1092" x2="1092" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1280" x2="1280" y1="138.8633" y2="1048.9746"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1437" x2="1437" y1="138.8633" y2="1048.9746"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="8.5" y="135.9102">UI</text><ellipse cx="18.5" cy="70.875" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M18.5,78.875 L18.5,105.875 M5.5,86.875 L31.5,86.875 M18.5,105.875 L5.5,120.875 M18.5,105.875 L31.5,120.875 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="87" x="139" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="151.5" y="111.4219">«Service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="146" y="127.9102">ms-guests</text><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="73" x="336" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="59" x="343" y="111.4219">«Broker»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="353.5" y="127.9102">Kafka</text><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="72" x="519" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="58" x="526" y="111.4219">«Couch»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="526.5" y="127.9102">Write DB</text><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="72" x="661" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="58" x="668" y="111.4219">«Couch»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="669" y="127.9102">Read DB</text><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="101" x="843" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="853" y="111.4219">«Processor»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="850" y="127.9102">Match &amp; Link</text><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="76" x="1054" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1061" y="111.4219">«Service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1061.5" y="127.9102">Experian</text><rect fill="#FFFFFF" height="46.9766" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="80" x="1240" y="90.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="45" x="1257.5" y="111.4219">«Lake»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1247" y="127.9102">Data Lake</text><rect fill="#FFFFFF" height="30.4883" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="55" x="1410" y="107.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1417" y="127.9102">couch</text><rect fill="#FFFFFF" height="178.4844" style="stroke:#000000;stroke-width:1.0;" width="10" x="177.5" y="185.4844"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="177.5" y="542.4531"/><rect fill="#FFFFFF" height="178.4844" style="stroke:#000000;stroke-width:1.0;" width="10" x="177.5" y="763.248"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="550" y="274.7266"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="692" y="631.6953"/><rect fill="#FFFFFF" height="533.1426" style="stroke:#000000;stroke-width:1.0;" width="10" x="888.5" y="408.5898"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="1087" y="453.2109"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#000000;stroke-width:1.0;" width="10" x="1432.5" y="852.4902"/><polygon fill="#000000" points="165.5,181.4844,175.5,185.4844,165.5,189.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="18.5" x2="171.5" y1="185.4844" y2="185.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="25.5" y="165.4316">HTTP Create/Update</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="25.5" y="180.7422">Profile/Account</text><polygon fill="#000000" points="360.5,226.1055,370.5,230.1055,360.5,234.1055" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="187.5" x2="366.5" y1="230.1055" y2="230.1055"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104" x="194.5" y="210.0527">Produces Event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="194.5" y="225.3633">guest topic</text><polygon fill="#000000" points="538,270.7266,548,274.7266,538,278.7266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="187.5" x2="544" y1="274.7266" y2="274.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="194.5" y="254.6738">HTTP Save</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="194.5" y="269.9844">guest profile</text><polygon fill="#000000" points="198.5,315.3477,188.5,319.3477,198.5,323.3477" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="192.5" x2="554" y1="319.3477" y2="319.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="204.5" y="299.2949">HTTP Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="204.5" y="314.6055">success</text><polygon fill="#000000" points="29.5,359.9688,19.5,363.9688,29.5,367.9688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="23.5" x2="181.5" y1="363.9688" y2="363.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="35.5" y="343.916">HTTP Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="35.5" y="359.2266">success</text><polygon fill="#000000" points="876.5,404.5898,886.5,408.5898,876.5,412.5898" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="372.5" x2="882.5" y1="408.5898" y2="408.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="379.5" y="388.5371">Consumes Event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="379.5" y="403.8477">guest topic</text><polygon fill="#000000" points="1075,449.2109,1085,453.2109,1075,457.2109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="898.5" x2="1081" y1="453.2109" y2="453.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121" x="905.5" y="433.1582">HTTP Standardize</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="905.5" y="448.4688">Primary Address</text><polygon fill="#000000" points="909.5,493.832,899.5,497.832,909.5,501.832" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="903.5" x2="1091" y1="497.832" y2="497.832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="915.5" y="477.7793">HTTP Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="915.5" y="493.0898">STD Address</text><polygon fill="#000000" points="198.5,538.4531,188.5,542.4531,198.5,546.4531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="192.5" x2="887.5" y1="542.4531" y2="542.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="89" x="204.5" y="522.4004">HTTP Update</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="204.5" y="537.7109">Marketing profile with STD address</text><polygon fill="#000000" points="876.5,583.0742,886.5,587.0742,876.5,591.0742" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="182.5" x2="882.5" y1="587.0742" y2="587.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="189.5" y="567.0215">HTTP Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="189.5" y="582.332">success</text><polygon fill="#000000" points="713,627.6953,703,631.6953,713,635.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="707" x2="887.5" y1="631.6953" y2="631.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="69" x="719" y="611.6426">HTTP Find</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="719" y="626.9531">find matching profile</text><polygon fill="#000000" points="876.5,672.3164,886.5,676.3164,876.5,680.3164" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="697" x2="882.5" y1="676.3164" y2="676.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="704" y="656.2637">HTTP Found</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="704" y="671.5742">found matching profile</text><line style="stroke:#000000;stroke-width:1.0;" x1="898.5" x2="940.5" y1="705.627" y2="705.627"/><line style="stroke:#000000;stroke-width:1.0;" x1="940.5" x2="940.5" y1="705.627" y2="718.627"/><line style="stroke:#000000;stroke-width:1.0;" x1="899.5" x2="940.5" y1="718.627" y2="718.627"/><polygon fill="#000000" points="909.5,714.627,899.5,718.627,909.5,722.627" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="905.5" y="700.8848">Applies Matching Rules</text><polygon fill="#000000" points="198.5,759.248,188.5,763.248,198.5,767.248" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="192.5" x2="887.5" y1="763.248" y2="763.248"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="89" x="204.5" y="743.1953">HTTP Update</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="204.5" y="758.5059">link profiles</text><polygon fill="#000000" points="360.5,803.8691,370.5,807.8691,360.5,811.8691" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="187.5" x2="366.5" y1="807.8691" y2="807.8691"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104" x="194.5" y="787.8164">Produces Event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="194.5" y="803.127">link topic</text><polygon fill="#000000" points="1420.5,848.4902,1430.5,852.4902,1420.5,856.4902" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="187.5" x2="1426.5" y1="852.4902" y2="852.4902"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="194.5" y="832.4375">HTTP Save</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="194.5" y="847.748">guest profile</text><polygon fill="#000000" points="198.5,893.1113,188.5,897.1113,198.5,901.1113" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="192.5" x2="1436.5" y1="897.1113" y2="897.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="204.5" y="877.0586">HTTP Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="204.5" y="892.3691">success</text><polygon fill="#000000" points="881.5,937.7324,891.5,941.7324,881.5,945.7324" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="182.5" x2="887.5" y1="941.7324" y2="941.7324"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="189.5" y="921.6797">HTTP Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="189.5" y="936.9902">success</text><polygon fill="#000000" points="1268,982.3535,1278,986.3535,1268,990.3535" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="372.5" x2="1274" y1="986.3535" y2="986.3535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="379.5" y="966.3008">Consumes Event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="379.5" y="981.6113">guest topic</text><polygon fill="#000000" points="1268,1026.9746,1278,1030.9746,1268,1034.9746" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="372.5" x2="1274" y1="1030.9746" y2="1030.9746"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="379.5" y="1010.9219">Consumes Event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="379.5" y="1026.2324">link topic</text><rect fill="#FFFFFF" height="11.7773" id="_title" style="stroke:none;stroke-width:1.0;" width="63" x="1436" y="5"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="63" x="1436" y="14.668">Match &amp; Link</text><!--MD5=[1bbaeb09436015ca244f8ebf713a3abd]
@startuml
!include ../include.puml

header Match & Link
title Match & Link execution flow

actor "UI" as ui

box "Microservices" #Bisque
    participant "ms-guests" as ms_guests <<Service>>
end box

box "Kafka Cluster\n ZooKeeper" #Pink
    participant "Kafka" as broker <<Broker>>
end box

box "NoSQL DB" #LightGreen
    participant "Write DB" as write_db <<Couch>>
    participant "Read DB" as read_db <<Couch>>
end box

box "Processors" #LightBlue
    participant "Match & Link" as match_link <<Processor>>
end box

box "External" #Lavender
    participant "Experian" as experian <<Service>>
end box

box "Data Lake" #LightGray
    participant "Data Lake" as data_lake <<Lake>>
end box

ui -> ms_guests : **HTTP Create/Update**\nProfile/Account
activate ms_guests
ms_guests -> broker : **Produces Event**\nguest topic
ms_guests -> write_db : **HTTP Save**\nguest profile
activate write_db
write_db - -> ms_guests : **HTTP Response**\nsuccess
deactivate write_db
ms_guests - -> ui : **HTTP Response**\nsuccess
deactivate ms_guests
broker -> match_link :**Consumes Event**\nguest topic
activate match_link
match_link -> experian :**HTTP Standardize**\nPrimary Address
activate experian
experian - -> match_link :**HTTP Response**\nSTD Address
deactivate experian
match_link -> ms_guests :**HTTP Update**\nMarketing profile with STD address
activate ms_guests
ms_guests - -> match_link :**HTTP Response**\nsuccess
deactivate ms_guests
match_link -> read_db :**HTTP Find**\nfind matching profile
activate read_db
read_db - -> match_link : **HTTP Found**\nfound matching profile
deactivate read_db
match_link -> match_link : Applies Matching Rules
match_link -> ms_guests : **HTTP Update**\nlink profiles
activate ms_guests
ms_guests -> broker : **Produces Event**\nlink topic
ms_guests -> couch : **HTTP Save**\nguest profile
activate couch
couch - -> ms_guests : **HTTP Response**\nsuccess
deactivate couch
ms_guests - -> match_link : **HTTP Response**\nsuccess
deactivate ms_guests
deactivate match_link
broker -> data_lake :**Consumes Event**\nguest topic
broker -> data_lake :**Consumes Event**\nlink topic

@enduml

@startuml



skinparam style strictuml

scale max 2048 width

skinparam BoxPadding 20
skinparam ParticipantPadding 30

skinparam actor {
  BorderColor Black
  BackgroundColor<< Human >> LightGrey
  BackgroundColor White

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam object {
  BorderColor Black
  BackgroundColor<<External>> LightGrey
  BackgroundColor White

  BackgroundColor<<Abstract>> LightBlue
  BackgroundColor<<Enum>> LightRed
}

skinparam folder {
  BorderColor Black
  BackgroundColor<< Human >> LightGrey
  BackgroundColor White

  BorderColor<<App>> $App
  BorderColor<<Park>> $Park
  BorderColor<<UPR>> $UPR
  BorderColor<<Vendor>> $Vendor

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam interface {
  BackgroundColor<<Ingore>> White
  BorderColor<<Ignore>> White
  FontColor<<Ignore>> White
  StereotypeFontColor<<Ignore>> White

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam ArrowColor<<Ignore>> White

skinparam ArrowColor Black
skinparam BackgroundColor White
skinparam CloudBackgroundColor white
skinparam DatabaseBackgroundColor White
skinparam NodeBackgroundColor white

skinparam class {
  BackgroundColor LightGrey
  BorderColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam Object {
  BackgroundColor White
  BorderColor Black

  BackgroundColor<<OtherDomain>> LightGrey
}

skinparam note {
  BackgroundColor #FFEFD7
  BorderColor Black
}

skinparam boundary {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam participant {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam card {
  BackgroundColor White
  BorderColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam queue {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BorderColor<<App>> $App
  BorderColor<<Park>> $Park
  BorderColor<<UPR>> $UPR
  BorderColor<<Vendor>> $Vendor

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam state {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam storage {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BorderColor<<App>> $App
  BorderColor<<Park>> $Park
  BorderColor<<UPR>> $UPR
  BorderColor<<Vendor>> $Vendor

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam collections {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam entity {
  BackgroundColor White
  BorderColor Black
  FontColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam SequenceBoxBorderColor Black

skinparam EntityBackgroundColor White
skinparam EntityBorderColor Black

skinparam activity {
  BackgroundColor white
  BarColor black
  BorderColor black
  DiamondBackgroundColor white
  DiamondBorderColor black
  EndColor black
  StartColor black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam sequence {
    MessageAlignment left

    LifeLineBorderColor Black
    LifeLineBackgroundColor White
}

skinparam usecase {
	BackgroundColor White
	BorderColor Black

	BackgroundColor<< Main >> YellowGreen
	BorderColor<< Main >> YellowGreen

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
  BackgroundColor<<Out of Scope>> $OutOfScope
}

skinparam interface {
  BackgroundColor White
  BorderColor Black

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
}

skinparam component {
  BackgroundColor White
  BorderColor Black

  BorderColor<<App>> $App
  BorderColor<<Park>> $Park
  BorderColor<<UPR>> $UPR
  BorderColor<<Vendor>> $Vendor

  FontColor<<App>> $App
  FontColor<<Park>> $Park
  FontColor<<UPR>> $UPR
  FontColor<<Vendor>> $Vendor

  BackgroundColor<<Existing>> $Existing
  BackgroundColor<<Modify>> $Modify
  BackgroundColor<<New>> $New
  BackgroundColor<<Deprecated>> $Deprecated
  BackgroundColor<<Out of Scope>> $OutOfScope
}

skinparam rectangle {
  BackgroundColor White
	roundCorner 25
}


header Match & Link
title Match & Link execution flow

actor "UI" as ui

box "Microservices" #Bisque
    participant "ms-guests" as ms_guests <<Service>>
end box

box "Kafka Cluster\n ZooKeeper" #Pink
    participant "Kafka" as broker <<Broker>>
end box

box "NoSQL DB" #LightGreen
    participant "Write DB" as write_db <<Couch>>
    participant "Read DB" as read_db <<Couch>>
end box

box "Processors" #LightBlue
    participant "Match & Link" as match_link <<Processor>>
end box

box "External" #Lavender
    participant "Experian" as experian <<Service>>
end box

box "Data Lake" #LightGray
    participant "Data Lake" as data_lake <<Lake>>
end box

ui -> ms_guests : **HTTP Create/Update**\nProfile/Account
activate ms_guests
ms_guests -> broker : **Produces Event**\nguest topic
ms_guests -> write_db : **HTTP Save**\nguest profile
activate write_db
write_db - -> ms_guests : **HTTP Response**\nsuccess
deactivate write_db
ms_guests - -> ui : **HTTP Response**\nsuccess
deactivate ms_guests
broker -> match_link :**Consumes Event**\nguest topic
activate match_link
match_link -> experian :**HTTP Standardize**\nPrimary Address
activate experian
experian - -> match_link :**HTTP Response**\nSTD Address
deactivate experian
match_link -> ms_guests :**HTTP Update**\nMarketing profile with STD address
activate ms_guests
ms_guests - -> match_link :**HTTP Response**\nsuccess
deactivate ms_guests
match_link -> read_db :**HTTP Find**\nfind matching profile
activate read_db
read_db - -> match_link : **HTTP Found**\nfound matching profile
deactivate read_db
match_link -> match_link : Applies Matching Rules
match_link -> ms_guests : **HTTP Update**\nlink profiles
activate ms_guests
ms_guests -> broker : **Produces Event**\nlink topic
ms_guests -> couch : **HTTP Save**\nguest profile
activate couch
couch - -> ms_guests : **HTTP Response**\nsuccess
deactivate couch
ms_guests - -> match_link : **HTTP Response**\nsuccess
deactivate ms_guests
deactivate match_link
broker -> data_lake :**Consumes Event**\nguest topic
broker -> data_lake :**Consumes Event**\nlink topic

@enduml

PlantUML version 1.2022.7(Mon Aug 22 13:01:30 EDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>